---
import ProjectCard from "./ProjectCard.astro";
import { getCollection } from "astro:content";

// Get featured projects from content collection
const allProjects = await getCollection("projects", ({ data }) => {
  return data.draft !== true && data.featured === true;
});
---

<section class="section section-alt">
  <div class="container">
    <div class="section-header">
      <h2 class="section-title">Featured Projects</h2>
      <a href="/projects" class="section-link"> View All Projects â†’ </a>
    </div>
    <div class="projects-grid">
      {
        allProjects.map((project) => (
          <ProjectCard
            title={project.data.title}
            description={project.data.description}
            tech={project.data.tech}
            status={project.data.status}
            category={project.data.category}
            github={project.data.github}
            codeberg={project.data.codeberg}
            gitlab={project.data.gitlab}
            demo={project.data.demo}
            image={project.data.image}
            featured={project.data.featured}
          />
        ))
      }
    </div>
  </div>
</section>
